# Tinkoff Trading Robot

Это робот для автоматической торговли через брокера Тинькофф. Он взаимодействует
с [Tinkoff Invest API](https://russianinvestments.github.io/investAPI/)

appname = `TradeSavvy`

## Содержимое файла .env

- `TOKEN`: ваш сгенерированный токен Tinkoff. Может быть как для "песочницы", так и для реального аккаунта.
  Сгенерировать нужно
  вот [тут](https://www.tinkoff.ru/invest/settings/)
- `ACCOUNT_ID`: ваш полученный Tinkoff account id. Для получения списка ваших счетов Tinkoff воспользуйтесь
  командой [get_accounts](#получение-информации-о-ваших-счетах)
- `SANDBOX`: установите в значение `False` если хотите протестировать стратегию на реальном счете. По умолчанию `True`

## Содержание файла instruments_config_scalpel.json

#### instruments:

Список инструментов, которыми вы хотите торговать, вместе с их настройками. Каждый элемент списка представляет собой
словарь со следующими ключами:

- `figi`: глобальный идентификатор финансового
  инструмента ([подробнее](https://russianinvestments.github.io/investAPI/faq_instruments/#figi_1)). Для получения figi
  по тикеру инструмента воспользуйтесь командой [get_figi](#получение-figi-по-тикеру)

- `strategy`: конфигурация стратегии:
  - `name`: имя стратегии
  - `parameters`: параметры стратегии

#### Параметры стратегии скальпинг

- `days_back_to_consider`: анализируются данные за указанный временной промежуток (в днях)
- `quantity_limit`: максимальное количество инструмента, которое должно быть в портфеле 
- `check_data`: интервал в секундах для проверки наличия новых цен и анализа новых данных

## Стратегия

### Скальпинг

- Тренд определяется путем анализа двух экспоненциальный сходящих средних (EMA). Когда 30-дневная EMA пересекает
  50-дневную EMA снизу фиксируем начало восходящего тренда, при пересечении сверху начало нисходящего тренда
- Для оценки уровня волатильности актива используются полосы Боллинджера (Bollinger Bands)
- Робот автоматически покупает актив при одновременном нахождении восходящего тренда и при пробое цены закрытия нижней
  полосы Боллинджера. При нисходящем тренде и пробое верхней полосы Боллинджера происходит продажа актива.

## Получение информации о счетах

Для получения информации о ваших счетах введите в командной строке:

```commandline
make get_accounts
```

При отсутствии счетов создается аккаунт в "песочнице".

## Получение figi по тикеру

Для получения figi по тикеру инструмента введите в командной строке:
```commandline
make get_figi
```